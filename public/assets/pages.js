$(document).ready(function(){$("#pages-list ul.folder img.toggler").click(function(d){var c=$(this);var b=c.parent().find("> ul.folder");if(b.is(":visible")){b.slideUp("fast",function(){c.attr("src",c.attr("src").replace("open","closed"));$.cookie(b.attr("id"),"none")})}else{b.slideDown("fast",function(){c.attr("src",c.attr("src").replace("closed","open"));$.cookie(b.attr("id"),"block")})}});$("#pages-list ul.folder").sortable({handle:"em",axis:"y",update:function(b,c){var d=$(this).sortable("serialize",{key:"children[]"});d+="&_method=put";$.post($(this).attr("data_url"),d,function(f){var e=typeof(f.error)!="undefined";$.growl((e?"error":"success"),(e?f.error:f.notice))},"json")}});$.subscribe("toggle.page_templatized.checked",function(b,c){$("#page_slug_input").hide();$("#page_redirect").parent("li").hide();$("#page_content_type_id_input").show()},[]);$.subscribe("toggle.page_templatized.unchecked",function(b,c){$("#page_slug_input").show();$("#page_redirect").parent("li").show();$("#page_slug").val(makeSlug($("#page_title").val())).addClass("touched");$("#page_content_type_id_input").hide()},[]);$.subscribe("toggle.page_redirect.checked",function(b,c){$("#page_templatized").parent("li").hide();$("#page_cache_strategy_input").hide();$("#page_redirect_url_input").show()},[]);$.subscribe("toggle.page_redirect.unchecked",function(b,c){$("#page_templatized").parent("li").show();$("#page_cache_strategy_input").show();$("#page_redirect_url_input").hide()},[]);$("#page_title").keypress(function(){var c=$(this);var b=$("#page_slug");if(!b.hasClass("filled")){setTimeout(function(){b.val(makeSlug(c.val())).addClass("touched")},50)}});$("#page_slug").keypress(function(){$(this).addClass("filled").addClass("touched")});var a=function(){params="parent_id="+$("#page_parent_id").val()+"&slug="+$("#page_slug").val();$.get($("#page_slug").attr("data_url"),params,function(b){$("#page_slug_input .inline-hints").html(b.url).effect("highlight")},"json")};$("#page_parent_id").change(a);setInterval(function(){var b=$("#page_slug");if(b.hasClass("touched")){b.removeClass("touched");a()}},2000);if(typeof $.fn.imagepicker!="undefined"){$("a#image-picker-link").imagepicker({insertFn:function(b){return"{{ '"+b.attr("data-local-path")+"' | theme_image_url }}"}})}});